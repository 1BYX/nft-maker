import React, { useState } from 'react'
import JSZip from 'jszip'
import { saveAs } from 'file-saver'

const ZipTest = () => {
  let [image, setImage] = useState('')
  const url =
    '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ApEC15FbW/piBKq/B34xi7jIlkD19+S3DjX0X4Fu/+r5tzd3/91l5z+eXx52xo6Z8Q3AMVFahAABAgQIvF9AAXi/lScJECBAgMAxAgrAMVFahAABAgQIvF9AAXi/lScJECBAgMAxAgrAMVFahAABAgQIvF9AAXi/lScJECBAgMAxAgrAMVFahAABAgQIvF9AAXi/lScJECBAgMAxAgrAMVFahAABAgQIvF9AAXi/lScJECBAgMAxAgrAMVFahAABAgQIvF9AAXi/lScJECBAgMAxAgrAMVFahAABAgQIvF9AAXi/lScJECBAgMAxAgrAMVFahAABAgQIvF/g+v2Pnvlk9fekq79n3a36+OW+dIXq/tX50uUNEyBAIFjANwDB4VudAAECBHIFFIDc7G1OgAABAsECCkBw+FYnQIAAgVwBBSA3e5sTIECAQLCAAhAcvtUJECBAIFdAAcjN3uYECBAgECygAASHb3UCBAgQyBVQAHKztzkBAgQIBAsoAMHhW50AAQIEcgUUgNzsbU6AAAECwQIKQHD4VidAgACBXAEFIDd7mxMgQIBAsIACEBy+1QkQIEAgV0AByM3e5gQIECAQLKAABIdvdQIECBDIFbjOXf2MzR+/3JcW+fzta2m+en7pcMPjBarv33gACxBoFPANQCO+owkQIECAQJeAAtAl71wCBAgQINAooAA04juaAAECBAh0CSgAXfLOJUCAAAECjQIKQCO+owkQIECAQJeAAtAl71wCBAgQINAooAA04juaAAECBAh0CSgAXfLOJUCAAAECjQIKQCO+owkQIECAQJeAAtAl71wCBAgQINAooAA04juaAAECBAh0CSgAXfLOJUCAAAECjQIKQCO+owkQIECAQJeAAtAl71wCBAgQINAooAA04juaAAECBAh0CVy9fn966zr8Es69vbkrXcPvmZf4DIcLPH65Lwn4+yvxxQ9X37/nl4fRhr4BGB2fyxMgQIAAgT0BBWDPzRQBAgQIEBgtoACMjs/lCRAgQIDAnoACsOdmigABAgQIjBZQAEbH5/IECBAgQGBPQAHYczNFgAABAgRGCygAo+NzeQIECBAgsCegAOy5mSJAgAABAqMFFIDR8bk8AQIECBDYE1AA9txMESBAgACB0QIKwOj4XJ4AAQIECOwJKAB7bqYIECBAgMBoAQVgdHwuT4AAAQIE9gQU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vc0JECBAIFhAAQgO3+oECBAgkCugAORmb3MCBAgQCBZQAILDtzoBAgQI5AooALnZ25wAAQIEggUUgODwrU6AAAECuQIKQG72NidAgACBYAEFIDh8qxMgQIBAroACkJu9zQkQIEAgWEABCA7f6gQIECCQK6AA5GZvcwIECBAIFlAAgsO3OgECBAjkCly9fn96y13f5tMFbm/uSit0/x586fKG2wUev9yX7vD88lCaN0ygIuAbgIqeWQIECBAgMFRAARganGsTIECAAIGKgAJQ0TNLgAABAgSGCigAQ4NzbQIECBAgUBFQACp6ZgkQIECAwFABBWBocK5NgAABAgQqAgpARc8sAQIECBAYKqAADA3OtQkQIECAQEVAAajomSVAgAABAkMFFIChwbk2AQIECBCoCCgAFT2zBAgQIEBgqIACMDQ41yZAgAABAhUBBaCiZ5YAAQIECAwVUACGBufaBAgQIECgIqAAVPTMEiBAgACBoQJXr9+f3obe3bUJlAVub+7Kn+EDcgWeXx5yl7f5eAHfAIyP0AIECBAgQGBdQAFYNzNBgAABAgTGCygA4yO0AAECBAgQWBdQANbNTBAgQIAAgfECCsD4CC1AgAABAgTWBRSAdTMTBAgQIEBgvIACMD5CCxAgQIAAgXUBBWDdzAQBAgQIEBgvoACMj9ACBAgQIEBgXUABWDczQYAAAQIExgsoAOMjtAABAgQIEFgXUADWzUwQIECAAIHxAgrA+AgtQIAAAQIE1gUUgHUzEwQIECBAYLyAAjA+QgsQIECAAIF1gavX709v62MmCBAgQIAAgckCvgGYnJ67EyBAgACBTQEFYBPOGAECBAgQmCygAExOz90JECBAgMCmgAKwCWeMAAECBAhMFlAAJqfn7gQIECBAYFNAAdiEM0aAAAECBCYLKACT03N3AgQIECCwKaAAbMIZI0CAAAECkwUUgMnpuTsBAgQIENgUUAA24YwRIECAAIHJAgrA5PTcnQABAgQIbAooAJtwxggQIECAwGQBBWByeu5OgAABAgQ2BRSATThjBAgQIEBgsoACMDk9dydAgAABApsCCsAmnDECBAgQIDBZQAGYnJ67EyBAgACBTQEFYBPOGAECBAgQmCygAExOz90JECBAgMCmgAKwCWeMAAECBAhMFlAAJqfn7gQIECBAYFNAAdiEM0aAAAECBCYLKACT03N3AgQIECCwKaAAbMIZI0CAAAECkwUUgMnpuTsBAgQIENgUUAA24YwRIECAAIHJAgrA5PTcnQABAgQIbAooAJtwxggQIECAwGQBBWByeu5OgAABAgQ2BRSATThjBAgQIEBgsoACMDk9dydAgAABApsC/wIZ0RDCtMe3jQAAAABJRU5ErkJggg=='
  const downloadFile = () => {
    let zip = new JSZip()

    let unformattedLayers = localStorage.getItem('layers')
    if (unformattedLayers) {
      const layers = JSON.parse(unformattedLayers)
      const unformattedUrl = layers[3].attributes[0].image
      const b64urlSplit = unformattedUrl.split(',')
      const b64url = b64urlSplit[1]

      zip.file('hello.txt', 'hello world\n')
      zip.file('bye.txt', 'bye you\n')
      let imgs = zip.folder('images')
      imgs?.file('image1.png', b64url, {
        base64: true,
      })

      zip.generateAsync({ type: 'blob' }).then((content) => {
        saveAs(content, 'example.zip')
      })
    }
  }

  return (
    <div className='w-max'>
      <button className='w-24 h-16 bg-accent7' onClick={downloadFile}>
        download
      </button>
    </div>
  )
}

export default ZipTest
